#!/bin/bash

walldir="$HOME/.local/share/temp_walls"

#tagoptions="#minimalism\n#Cyberpunk 2077\n#fantasy girl\n#digital art\n#anime\n#4K\n#nature"
echo "What kinda wp u want?"
read $query
echo "max page x24 : "
read $maxpages

#sortoptions="date_added\nrelevance\nrandom\nviews\nfavorites\ntoplist"

sorting="relevance"
query="$(sed 's/#//g' <<<$query)"
query="$(sed 's/ /+/g' <<<$query)" 
echo $query

notify-send "â¬‡ï¸ Downloading wallpapers ðŸ–¼ï¸"
for i in $(seq 1 $maxpage);
do
  curl -s https://wallhaven.cc/api/v1/search\?atleast\=1920x1080\&sorting\=$sorting\&q\=$query\&page\=$i > tmp.txt
  page=$(cat tmp.txt | jq '.' | grep -Eoh "https:\/\/w\.wallhaven.cc\/full\/.*(jpg|png)\b")
  wget -nc -P $walldir $page
done
rm tmp.txt
notify-send "ðŸ˜Š Download finish âœ…"
#sxiv -t $walldir/*

